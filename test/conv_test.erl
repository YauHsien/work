-module(conv_test).
-include_lib("eunit/include/eunit.hrl").

%% To test erlang:iolist_to_binary/1 and unicode:characters_to_binary/2.

iolist_to_binary_in_ascii_test() ->
    ?assertEqual(
       lists:map(fun(N) -> try iolist_to_binary([N])
			   catch _:_ -> undefined end end, lists:seq(0, 256)),
       [<<0>>,   <<1>>,   <<2>>,   <<3>>,   <<4>>,   <<5>>,   <<6>>,   <<7>>,
	<<"\b">>,<<"\t">>,<<"\n">>,<<"\v">>,<<"\f">>,<<"\r">>, <<14>>, <<15>>,
	<<16>>,	 <<17>>,  <<18>>,  <<19>>,  <<20>>,  <<21>>,  <<22>>,  <<23>>,
	<<24>>,  <<25>>,  <<26>>, <<"\e">>, <<28>>,  <<29>>,  <<30>>,  <<31>>,
	<<" ">>, <<"!">>, <<"\"">>, <<"#">>, <<"$">>, <<"%">>, <<"&">>, <<"'">>,
	<<"(">>, <<")">>, <<"*">>, <<"+">>, <<",">>, <<"-">>, <<".">>, <<"/">>,
	<<"0">>, <<"1">>, <<"2">>, <<"3">>, <<"4">>, <<"5">>, <<"6">>, <<"7">>,
	<<"8">>, <<"9">>, <<":">>, <<";">>, <<"<">>, <<"=">>, <<">">>, <<"?">>,
	<<"@">>, <<"A">>, <<"B">>, <<"C">>, <<"D">>, <<"E">>, <<"F">>, <<"G">>,
	<<"H">>, <<"I">>, <<"J">>, <<"K">>, <<"L">>, <<"M">>, <<"N">>, <<"O">>,
	<<"P">>, <<"Q">>, <<"R">>, <<"S">>, <<"T">>, <<"U">>, <<"V">>, <<"W">>,
	<<"X">>, <<"Y">>, <<"Z">>, <<"[">>, <<"\\">>, <<"]">>, <<"^">>, <<"_">>,
	<<"`">>, <<"a">>, <<"b">>, <<"c">>, <<"d">>, <<"e">>, <<"f">>, <<"g">>,
	<<"h">>, <<"i">>, <<"j">>, <<"k">>, <<"l">>, <<"m">>, <<"n">>, <<"o">>,
	<<"p">>, <<"q">>, <<"r">>, <<"s">>, <<"t">>, <<"u">>, <<"v">>, <<"w">>,
	<<"x">>, <<"y">>, <<"z">>, <<"{">>, <<"|">>, <<"}">>, <<"~">>, <<127>>,
	<<128>>, <<129>>, <<130>>, <<131>>, <<132>>, <<133>>, <<134>>, <<135>>,
	<<136>>, <<137>>, <<138>>, <<139>>, <<140>>, <<141>>, <<142>>, <<143>>,
	<<144>>, <<145>>, <<146>>, <<147>>, <<148>>, <<149>>, <<150>>, <<151>>,
	<<152>>, <<153>>, <<154>>, <<155>>, <<156>>, <<157>>, <<158>>, <<159>>,
	<<" ">>, <<"¡">>, <<"¢">>, <<"£">>, <<"¤">>, <<"¥">>, <<"¦">>, <<"§">>,
	<<"¨">>, <<"©">>, <<"ª">>, <<"«">>, <<"¬">>, <<"­">>, <<"®">>, <<"¯">>,
	<<"°">>, <<"±">>, <<"²">>, <<"³">>, <<"´">>, <<"µ">>, <<"¶">>, <<"·">>,
	<<"¸">>, <<"¹">>, <<"º">>, <<"»">>, <<"¼">>, <<"½">>, <<"¾">>, <<"¿">>,
	<<"À">>, <<"Á">>, <<"Â">>, <<"Ã">>, <<"Ä">>, <<"Å">>, <<"Æ">>, <<"Ç">>,
	<<"È">>, <<"É">>, <<"Ê">>, <<"Ë">>, <<"Ì">>, <<"Í">>, <<"Î">>, <<"Ï">>,
	<<"Ð">>, <<"Ñ">>, <<"Ò">>, <<"Ó">>, <<"Ô">>, <<"Õ">>, <<"Ö">>, <<"×">>,
	<<"Ø">>, <<"Ù">>, <<"Ú">>, <<"Û">>, <<"Ü">>, <<"Ý">>, <<"Þ">>, <<"ß">>,
	<<"à">>, <<"á">>, <<"â">>, <<"ã">>, <<"ä">>, <<"å">>, <<"æ">>, <<"ç">>,
	<<"è">>, <<"é">>, <<"ê">>, <<"ë">>, <<"ì">>, <<"í">>, <<"î">>, <<"ï">>,
	<<"ð">>, <<"ñ">>, <<"ò">>, <<"ó">>, <<"ô">>, <<"õ">>, <<"ö">>, <<"÷">>,
	<<"ø">>, <<"ù">>, <<"ú">>, <<"û">>, <<"ü">>, <<"ý">>, <<"þ">>, <<"ÿ">>,
	undefined]
      ).

unicode_characters_to_binary_in_ascii_test() ->
    ?assertEqual(
       lists:map(fun(N) -> unicode:characters_to_binary([N]) end,
		 lists:seq(0, 256)),
       [<<0>>,   <<1>>,   <<2>>,   <<3>>,   <<4>>,   <<5>>,   <<6>>,   <<7>>, 
	<<"\b">>,<<"\t">>,<<"\n">>,<<"\v">>,<<"\f">>,<<"\r">>, <<14>>, <<15>>,
	<<16>>,  <<17>>,  <<18>>,  <<19>>,  <<20>>,  <<21>>,  <<22>>,  <<23>>,
	<<24>>,	 <<25>>,  <<26>>, <<"\e">>, <<28>>,  <<29>>,  <<30>>,  <<31>>, 
	<<" ">>, <<"!">>, <<"\"">>,<<"#">>, <<"$">>, <<"%">>, <<"&">>, <<"'">>,
	<<"(">>, <<")">>, <<"*">>, <<"+">>, <<",">>, <<"-">>, <<".">>, <<"/">>,
	<<"0">>, <<"1">>, <<"2">>, <<"3">>, <<"4">>, <<"5">>, <<"6">>, <<"7">>,
	<<"8">>, <<"9">>, <<":">>, <<";">>, <<"<">>, <<"=">>, <<">">>, <<"?">>,
	<<"@">>, <<"A">>, <<"B">>, <<"C">>, <<"D">>, <<"E">>, <<"F">>, <<"G">>,
	<<"H">>, <<"I">>, <<"J">>, <<"K">>, <<"L">>, <<"M">>, <<"N">>, <<"O">>,
	<<"P">>, <<"Q">>, <<"R">>, <<"S">>, <<"T">>, <<"U">>, <<"V">>, <<"W">>,
	<<"X">>, <<"Y">>, <<"Z">>, <<"[">>, <<"\\">>,<<"]">>, <<"^">>, <<"_">>,
	<<"`">>, <<"a">>, <<"b">>, <<"c">>, <<"d">>, <<"e">>, <<"f">>, <<"g">>,
	<<"h">>, <<"i">>, <<"j">>, <<"k">>, <<"l">>, <<"m">>, <<"n">>, <<"o">>,
	<<"p">>, <<"q">>, <<"r">>, <<"s">>, <<"t">>, <<"u">>, <<"v">>, <<"w">>,
	<<"x">>, <<"y">>, <<"z">>, <<"{">>, <<"|">>, <<"}">>, <<"~">>, <<127>>,
	<<194,128>>, <<194,129>>, <<194,130>>, <<194,131>>, <<194,132>>,
	<<194,133>>, <<194,134>>, <<194,135>>,
	<<194,136>>, <<194,137>>, <<194,138>>, <<194,139>>, <<194,140>>,
	<<194,141>>, <<194,142>>, <<194,143>>,
	<<194,144>>, <<194,145>>, <<194,146>>, <<194,147>>, <<194,148>>,
	<<194,149>>, <<194,150>>, <<194,151>>, 
	<<194,152>>, <<194,153>>, <<194,154>>, <<194,155>>, <<194,156>>, 
	<<194,157>>, <<194,158>>, <<194,159>>,
	<<"Â ">>,<<"Â¡">>,<<"Â¢">>,<<"Â£">>,<<"Â¤">>,<<"Â¥">>,<<"Â¦">>,<<"Â§">>,
	<<"Â¨">>,<<"Â©">>,<<"Âª">>,<<"Â«">>,<<"Â¬">>,<<"Â­">>,<<"Â®">>,<<"Â¯">>,
	<<"Â°">>,<<"Â±">>,<<"Â²">>,<<"Â³">>,<<"Â´">>,<<"Âµ">>,<<"Â¶">>,<<"Â·">>,
	<<"Â¸">>,<<"Â¹">>,<<"Âº">>,<<"Â»">>,<<"Â¼">>,<<"Â½">>,<<"Â¾">>,<<"Â¿">>,
	<<195,128>>, <<195,129>>, <<195,130>>, <<195,131>>, <<195,132>>, 
	<<195,133>>, <<195,134>>, <<195,135>>, 
	<<195,136>>, <<195,137>>, <<195,138>>, <<195,139>>, <<195,140>>, 
	<<195,141>>, <<195,142>>, <<195,143>>, 
	<<195,144>>, <<195,145>>, <<195,146>>, <<195,147>>, <<195,148>>, 
	<<195,149>>, <<195,150>>, <<195,151>>, 
	<<195,152>>, <<195,153>>, <<195,154>>, <<195,155>>, <<195,156>>,
	<<195,157>>, <<195,158>>, <<195,159>>, 
	<<"Ã ">>,<<"Ã¡">>,<<"Ã¢">>,<<"Ã£">>,<<"Ã¤">>,<<"Ã¥">>,<<"Ã¦">>,<<"Ã§">>,
	<<"Ã¨">>,<<"Ã©">>,<<"Ãª">>,<<"Ã«">>,<<"Ã¬">>,<<"Ã­">>,<<"Ã®">>,<<"Ã¯">>,
	<<"Ã°">>,<<"Ã±">>,<<"Ã²">>,<<"Ã³">>,<<"Ã´">>,<<"Ãµ">>,<<"Ã¶">>,<<"Ã·">>,
	<<"Ã¸">>,<<"Ã¹">>,<<"Ãº">>,<<"Ã»">>,<<"Ã¼">>,<<"Ã½">>,<<"Ã¾">>,<<"Ã¿">>,
	<<196,128>>]
      ).
